{"version":3,"sources":["../src/__test__/helper/helper/ClientClass.ts"],"names":[],"mappings":";;;AAAA,qEAAqE;AACrE,uDAAuD;AACvD,sCAA4C;AAE5C,MAAa,OAAO;IAIlB,YAAY,eAAuB;QAFlB,aAAQ,GAAW,UAAU,CAAC;QAG7C,IAAI,CAAC,IAAI,GAAG,IAAI,wBAAe,CAAC,eAAe,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC;QAChE,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,WAAW,EAAE,GAAG,EAAE;YAC7B,OAAO,CAAC,GAAG,CAAC,4BAA4B,CAAC,CAAC;YAC1C,IAAI,CAAC,oBAAoB,EAAE,CAAC;QAC9B,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,SAAS,EAAE,GAAG,EAAE;YAC3B,OAAO,CAAC,KAAK,CAAC,2BAA2B,CAAC,CAAC;QAC7C,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,sBAAsB,EAAE,GAAG,EAAE;YACxC,OAAO,CAAC,KAAK,CAAC,iCAAiC,CAAC,CAAC;QACnD,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,cAAc,EAAE,GAAG,EAAE;YAChC,OAAO,CAAC,KAAK,CAAC,+BAA+B,CAAC,CAAC;QACjD,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,OAAO,EAAE,CAAC,KAAK,EAAE,EAAE;YAC9B,OAAO,CAAC,KAAK,CAAC,kBAAkB,EAAE,KAAK,CAAC,CAAC;QAC3C,CAAC,CAAC,CAAC;IACL,CAAC;IAEM,oBAAoB;QACzB,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,QAAQ,EAAE,CAAC,KAAK,EAAE,EAAE;YAC7C,IAAI,KAAK,EAAE;gBACT,OAAO,CAAC,KAAK,CAAC,yBAAyB,EAAE,KAAK,CAAC,CAAC;gBAChD,OAAO;aACR;YAED,OAAO,CAAC,GAAG,CAAC,mCAAmC,CAAC,CAAC;YAEjD,uBAAuB;YAEvB,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,QAAQ,EAAE,CAAC,KAAK,EAAE,EAAE;gBAC7C,IAAI,KAAK,EAAE;oBACT,OAAO,CAAC,KAAK,CAAC,yBAAyB,EAAE,KAAK,CAAC,CAAC;oBAChD,OAAO,yBAAyB,CAAC;iBAClC;qBAAM;oBACL,OAAO,CAAC,GAAG,CAAC,eAAe,CAAC,CAAC;oBAC7B,OAAO,WAAW,CAAC;iBACpB;YACH,CAAC,CAAC,CAAC;YACH,OAAO,WAAW,CAAC;QACrB,CAAC,CAAC,CAAC;IACL,CAAC;CACF;AAnDD,0BAmDC","file":"ClientClass.js","sourcesContent":["/* eslint-disable @typescript-eslint/explicit-member-accessibility */\r\n/* eslint-disable @typescript-eslint/no-explicit-any */\r\nimport { DistributedLock } from \"../zklock\";\r\n\r\nexport class MyClass {\r\n  private lock: DistributedLock;\r\n  private readonly lockPath: string = '/my-lock';\r\n\r\n  constructor(zkConnectString: string) {\r\n    this.lock = new DistributedLock(zkConnectString, this.lockPath);\r\n    this.lock.on('connected', () => {\r\n      console.log('ZooKeeper client connected');\r\n      this.acquireLockAndDoWork();\r\n    });\r\n\r\n    this.lock.on('expired', () => {\r\n      console.error('ZooKeeper session expired');\r\n    });\r\n\r\n    this.lock.on('authenticationFailed', () => {\r\n      console.error('ZooKeeper authentication failed');\r\n    });\r\n\r\n    this.lock.on('disconnected', () => {\r\n      console.error('ZooKeeper client disconnected');\r\n    });\r\n\r\n    this.lock.on('error', (error) => {\r\n      console.error('ZooKeeper error:', error);\r\n    });\r\n  }\r\n\r\n  public acquireLockAndDoWork(): any {\r\n    this.lock.acquireLock(this.lockPath, (error) => {\r\n      if (error) {\r\n        console.error('Failed to acquire lock:', error);\r\n        return;\r\n      }\r\n\r\n      console.log('Lock acquired, doing some work...');\r\n\r\n      // Do some work here...\r\n\r\n      this.lock.releaseLock(this.lockPath, (error) => {\r\n        if (error) {\r\n          console.error('Failed to release lock:', error);\r\n          return 'Failed to release lock:';\r\n        } else {\r\n          console.log('Lock released');\r\n          return 'task done';\r\n        }\r\n      });\r\n      return 'task done';\r\n    });\r\n  }\r\n}\r\n"]}